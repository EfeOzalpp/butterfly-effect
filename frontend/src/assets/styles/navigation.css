/* ---------- Base ---------- */
.nav-toggle { pointer-events: all; cursor: pointer; color: rgb(6,21,1); border: 1px solid rgb(138,138,138); border-radius: 6px; background: #ffffff; }
.navigation { box-sizing: border-box; width: 100%; pointer-events: none; padding-left: 32px; padding-top: 24px; position: absolute; display: flex; flex-direction: row; align-items: flex-start; justify-content: space-between; user-select: none; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; }
.left { align-items: center; position: relative; width: auto; display: flex; justify-content: center; z-index: 15; }
.logo-image { pointer-events: none; user-select: none; position: absolute; max-width: 100%; max-height: 100%; object-fit: contain; }
.level-two { display: flex; flex-direction: column; width: 100%; position: relative; justify-content: flex-end; align-items: flex-end; }
button.observe-results { pointer-events: all; cursor: pointer; color: rgb(6,21,1); border: 1px solid rgb(138 138 138 / 78%); border-radius: 6px; background: #fff; }
.feedback { pointer-events: all; cursor: pointer; color: rgb(6,21,1); border: 1px solid rgb(138,138,138); border-radius: 6px; background: #ffffff; }
.nav-right { display: flex; align-items: flex-end; justify-content: flex-end; }
.burger-toggle, .info-close { background: #fff; cursor: pointer; z-index: 10; pointer-events: all; position: relative; display: inline-flex; align-items: center; justify-content: center; border: 1px solid rgb(138 138 138 / 78%); color: black; }
.burger-toggle:hover, .info-close:hover { transform: scale(1.1); transition: transform 0.1s ease; }
.observe-results { pointer-events: auto; }
.observe-results:hover, .nav-toggle:hover { transition: transform 0.1s ease, box-shadow 0.2s ease; box-shadow: 0 4px 10px rgba(214,214,214,0.107); }
.nav-divider { display: flex; }
div.level-one, .observe-results { z-index: 10; }
.gp-you { color:#000000; font-weight: 600; }
/* Dark theme */
.level-one.is-dark .nav-toggle, .level-one.is-dark .feedback, .level-two.is-dark .observe-results, .level-two.is-dark .burger-toggle, .level-two.is-dark .info-close { background-color: #292929; color: #fff; border-color: #444; }
.level-one.is-dark .nav-toggle:hover, .level-one.is-dark .feedback:hover, .level-two.is-dark .observe-results:hover, .level-two.is-dark .burger-toggle:hover, .level-two.is-dark .info-close:hover { background-color: #333333; border-color: #555; }
/* Post-complete accent */
.level-two.is-post-complete .observe-results { box-shadow: 0 0 0 2px rgba(41,41,41,0.08) inset; transition: box-shadow 150ms ease; }
.level-two.is-post-complete .observe-results:hover { box-shadow: 0 0 0 2px rgba(41,41,41,0.14) inset; }
/* Optional unify */
.nav-toggle.is-dark, .feedback.is-dark, .observe-results.is-dark, .burger-toggle.is-dark, .info-close.is-dark { background-color: #292929; color: #fff; border-color: #444; }
/* GraphPicker */
.graph-picker { position: relative; z-index: 7; pointer-events: all; }
/* ---------- Select styling ---------- */
.graph-picker select { -webkit-appearance: none; appearance: none; background: rgba(255,255,255,0.65); backdrop-filter: blur(6px); border: 1px solid #111; border-radius: 10px; padding: 10px 36px 10px 12px; font-size: 14px; font-weight: 600; line-height: 1.2; color: #111; cursor: pointer; outline: none; transition: box-shadow 150ms ease, background-color 150ms ease, border-color 150ms ease; }
/* ---- GraphPicker container ---- */
.gp-picker { position: relative; display: block; width: 100%; max-width: 720px; margin: 0; }
/* ---- Trigger (glassmorphism) ---- */
.gp-trigger { width: 340px; box-sizing: border-box; display: flex; align-items: center; justify-content: space-between; padding: 14px 16px; background: linear-gradient(180deg, rgba(255,255,255,0.55), rgba(255,255,255,0.35)); backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); border: 1px solid rgba(255,255,255,0.35); box-shadow: 0 8px 20px rgba(0,0,0,0.08), inset 0 1px 0 rgba(255,255,255,0.3); color: #0f172a; cursor: pointer; transition: box-shadow 160ms ease, transform 120ms ease, border-color 160ms ease; }
.gp-trigger:hover { border-color: rgba(255,255,255,0.55); box-shadow: 0 12px 28px rgba(0,0,0,0.12), inset 0 1px 0 rgba(255,255,255,0.4); }
.gp-trigger:active { transform: translateY(1px); }
.gp-trigger:focus-visible { outline: 2px solid #505050; outline-offset: 2px; }
.gp-trigger[aria-expanded="true"] .gp-trigger-chevron svg { transform: rotate(180deg); border-radius: 16px; }
.gp-trigger-chevron { position: absolute; right: 10px; top: 50%; transform: translateY(-50%); display: inline-flex; align-items: center; justify-content: center; width: 28px; height: 28px; border-radius: 20px; background: rgba(0,0,0,0.04); border: 1px solid #d6dee6; box-shadow: 0 1px 2px rgba(0,0,0,.05) inset; transition: background-color 160ms ease, border-color 160ms ease, box-shadow 160ms ease; pointer-events: none; }
.gp-trigger-label { display: inline-block; max-width: calc(100% - 18px); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
/* ---- Popover list ---- */
.gp-listbox { width: 320px; position: absolute; left: 0; right: 0; background: linear-gradient(180deg, rgba(255,255,255,0.70), rgba(255,255,255,0.45)); backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); border: 1px solid rgba(255,255,255,0.38); border-radius: 8px; box-shadow: 0 18px 36px rgba(236,236,236,0.18), 0 6px 16px rgba(224,224,224,0.12); max-height: 340px; overflow-y: auto; padding: 8px; z-index: 50; }
.gp-listbox.drop-down { top: calc(100% + 8px); }
.gp-listbox.drop-up { bottom: calc(100% + 8px); }
/* ---- Options ---- */
.gp-option { display: flex; align-items: center; gap: 10px; padding: 12px 14px; border-radius: 12px; border: 1px solid transparent; cursor: pointer; transition: background-color 100ms ease, border-color 100ms ease, transform 80ms ease; }
.gp-option.is-active { background: rgba(255,255,255,0.498); }
.gp-option.is-selected { border-color: rgba(181,181,181,0.82); background-color: white; }
.gp-option:active { transform: translateY(1px); }
.gp-dot { width: 8px; height: 8px; border-radius: 50%; background: #c3cbd5; flex: 0 0 auto; }
.gp-dot.is-selected { background: #0b0b0b; }
.gp-label { flex: 1 1 auto; font-size: 1rem; color: #0f172a; }
.gp-count { flex: 0 0 auto; margin-left: 8px; opacity: 0.85; font-variant-numeric: tabular-nums; color: #0f172a; }
.gp-back-icon { width: 16px; height: 15px; }
/* ---- Fixed width ---- */
.gp--w300 .gp-trigger, .gp--w300 .gp-listbox { width: 300px; max-width: 300px; }
/* Scrollbar */
.gp-listbox { scrollbar-width: thin; scrollbar-color: #999 transparent; }
.gp-listbox::-webkit-scrollbar { width: 6px; }
.gp-listbox::-webkit-scrollbar-track { background: transparent; }
.gp-listbox::-webkit-scrollbar-thumb { background-color: #999; border-radius: 4px; }
.gp-listbox::-webkit-scrollbar-thumb:hover { background-color: #666; }
.gp-listbox::-webkit-scrollbar-button { display: none; width: 0; height: 0; }

/* Hide regular nav bits when info is open (extra safety even though we conditionally render) */
.navigation.info-open .level-one { display: none; }
.navigation.info-open .nav-divider { display: none; }
.navigation.info-open .burger-toggle { display: none; }
/* The x button lives in level-two; keep it visible */
.navigation.info-open .info-close { display: inline-flex; }

/* ---------- Mobile (<768px) ---------- */
@media (max-width: 768px) {
  .navigation { padding-left: 16px; padding-right: 16px; align-items: flex-start; transition: transform 0.4s ease, opacity 0.3s ease; will-change: transform, opacity; transform: translateY(0); opacity: 1; z-index: 55; transition: transform 260ms cubic-bezier(.22,.61,.36,1), opacity 200ms ease; }
  .logo-divider { aspect-ratio: 10 / 9; height: 2.8em; width: auto; margin-top: 0.6em; }
  .nav-right { flex-direction: column-reverse; }
  .level-two.is-dark.is-post-complete .burger-toggle, .level-two.is-post-complete .burger-toggle { margin-top: 0px; }
  .level-two { margin-bottom: 1.1em; }
  .level-two .graph-picker { left: calc(16vw - 81px);}
  .level-two.is-post-complete .graph-picker { left: 0% !important;}
  .level-two.is-dark.is-post-complete, .level-two.is-post-complete { flex-direction: row; align-items: center; }
  div.level-one { display: flex; gap: 10px; position: relative; transform: translateY(0); opacity: 1; transition: transform 400ms ease, opacity 400ms ease; will-change: transform, opacity; flex-direction: column; align-items: flex-end; }
  div.level-one.burger-closed { transform: translateY(14px); opacity: 0; pointer-events: none; }
  div.level-one.burger-closed .feedback, div.level-one.burger-closed .nav-toggle { pointer-events: none; }
  .burger-toggle, .info-close { width: 36px; height: 36px; border-radius: 8px; margin-top: 16px; }
  .level-two { margin-bottom: 1em; }
  button.observe-results { padding-bottom: 1.8em; padding-top: 1.8em; width: 40vw; }
  button.observe-results.active.is-dark, button.observe-results.active { padding-bottom: 1.5em; padding-top: 1.5em; }
  button.observe-results.active { width: 16vw; }
  .feedback, .nav-toggle { padding-bottom: 1.8em; padding-top: 1.8em; }
  .nav-toggle { width: 40vw; align-items: center; justify-content: center; }
  .gp-trigger { width: 200px; font-family: Heebo, sans-serif; padding: 1.4em 18px; border-radius: 12px; font-size: 3.6vw; font-weight: 600; color: #282828; }
  .gp-trigger-chevron { position: absolute; right: 10px; top: 50%; transform: translateY(-50%); display: inline-flex; align-items: center; justify-content: center; width: 36px; height: 36px; border-radius: 8px; background: rgba(0,0,0,0.04); border: 1px solid #d6dee6; box-shadow: 0 1px 2px rgba(0,0,0,.05) inset; transition: background-color 160ms ease, border-color 160ms ease, box-shadow 160ms ease; pointer-events: none; }
  .gp-listbox { border-radius: 16px; max-height: 400px; width: 280px; left: -50px; }
  .gp-option { padding: 14px 16px; }
  .gp-label { font-size: 1.05rem; }
  .nav-divider { align-items: center; }
  .level-two.is-dark.is-post-complete .nav-divider, .level-two.is-post-complete .nav-divider { width: calc(50vw + 48px); }
  .nav-divider .observe-results { margin-left: auto; }
  .navigation.nav-hidden-mobile { transform: translateY(-120%); opacity: 0; pointer-events: none; }
}

/* ---------- Tablet (768pxâ€“1023px) ---------- */
@media (min-width: 768px) and (max-width: 1024px) {
  .navigation { padding-left: 32px; padding-right: 32px; }
  .logo-divider { aspect-ratio: 10 / 9; height: 3.2em; width: auto; margin-top: 0.4em; }
  .nav-right { flex-direction: column-reverse; }
  div.level-one { display: flex; gap: 16px; position: relative; transform: translateY(0); opacity: 1; transition: transform 400ms ease, opacity 400ms ease; will-change: transform, opacity; flex-direction: column; align-items: flex-end; }
  div.level-one.burger-closed { transform: translateY(14px); opacity: 0; pointer-events: none; }
  div.level-one.burger-closed .feedback, div.level-one.burger-closed .nav-toggle { pointer-events: none; }
  .burger-toggle, .info-close { width: 56px; height: 56px; border-radius: 8px; margin-top: 16px; }
  .level-two.is-dark.is-post-complete .burger-toggle, .level-two.is-post-complete .burger-toggle  { margin-top: 0px; }
  .level-two { margin-bottom: 1.1em; }
  .level-two .graph-picker { left: calc(12vw - 138px);}
  .level-two.is-post-complete .graph-picker { left: 0% !important;}
  .level-two.is-dark.is-post-complete, .level-two.is-post-complete { flex-direction: row; align-items: center; }
  button.observe-results { padding-bottom: 1.8em; padding-top: 1.8em; width: 24vw; }
  button.observe-results.active { width: 12vw; }
  .observe-results:hover { transform: scale(1.1); }
  .feedback, .nav-toggle { padding-bottom: 1.8em; padding-top: 1.8em; }
  .nav-toggle { width: 22vw; display: inline-flex; align-items: center; gap: 6px; justify-content: center; }
  .gp-picker { max-width: 880px; }
  .gp-trigger { font-family: Heebo, sans-serif; padding: 1.2em 18px; border-radius: 12px; font-size: 2.2vw; font-weight: 600; color: #282828; }
  .gp-trigger-chevron { position: absolute; right: 10px; top: 50%; transform: translateY(-50%); display: inline-flex; align-items: center; justify-content: center; width: 36px; height: 36px; border-radius: 8px; background: rgba(0,0,0,0.04); border: 1px solid #d6dee6; box-shadow: 0 1px 2px rgba(0,0,0,.05) inset; transition: background-color 160ms ease, border-color 160ms ease, box-shadow 160ms ease; pointer-events: none; }
  .gp-listbox { border-radius: 16px; max-height: 400px; }
  .gp-option { padding: 14px 16px; }
  .gp-label { font-size: 1.05rem; }
  .nav-divider { align-items: center; gap: 16px; width: calc(50vw + 130px); }
  .level-two.is-dark.is-post-complete .nav-divide, .level-two.is-post-complete .nav-divider { width: calc(50vw + 90px);}
  .nav-divider .observe-results { margin-left: auto; }
}

/* ---------- Desktop (>=1024px) ---------- */
@media (min-width: 1025px) {
  .navigation { padding-left: 40px; padding-right: 40px; }
  .logo-divider { aspect-ratio: 10 / 9; height: 3em; width: auto; margin-top: 0.2em; }
  .nav-right { flex-direction: column-reverse; }
  div.level-one { display: flex; gap: 16px; position: relative; transform: translateY(0); opacity: 1; transition: transform 400ms ease, opacity 400ms ease; will-change: transform, opacity; flex-direction: column; align-items: flex-end; }
  div.level-one.burger-closed { transform: translateY(14px); opacity: 0; pointer-events: none; }
  div.level-one.burger-closed .feedback, div.level-one.burger-closed .nav-toggle { pointer-events: none; }
  .burger-toggle, .info-close { width: 40px; height: 40px; border-radius: 6px; margin-top: 1.2rem; }
  .level-two { margin-bottom: 16px; }
  .level-two.is-dark.is-post-complete, .level-two.is-post-complete { flex-direction: row; align-items: center; }
  .level-two.is-dark.is-post-complete .burger-toggle, .level-two.is-post-complete .burger-toggle { margin-top: 0px; }
  button.observe-results { padding-bottom: 1.8em; padding-top: 1.8em; width: 14vw; }
  button.observe-results.active { width: 6vw; }
  .observe-results:hover, .nav-toggle:hover { transform: scale(1.1); }
  .feedback, .nav-toggle { padding-top: 1.8em; padding-bottom: 1.8em; }
  .nav-toggle { width: 14vw; display: inline-flex; align-items: center; gap: 6px; justify-content: center; }
  .gp-picker { max-width: 880px; }
  .gp-trigger { font-family: Heebo, sans-serif; padding: 1.2em 18px; border-radius: 8px; font-size: 1.1vw; font-weight: 600; color: #282828; }
  .gp-trigger-chevron { position: absolute; right: 10px; top: 50%; transform: translateY(-50%); display: inline-flex; align-items: center; justify-content: center; width: 28px; height: 28px; border-radius: 10px; background: rgba(0,0,0,0.04); border: 1px solid #d6dee6; box-shadow: 0 1px 2px rgba(0,0,0,.05) inset; transition: background-color 160ms ease, border-color 160ms ease, box-shadow 160ms ease; pointer-events: none; }
  .gp-listbox { border-radius: 16px; max-height: 400px; }
  .gp-option { padding: 14px 16px; }
  .gp-label { font-size: 1.05rem; }
  .nav-divider { align-items: center; gap: 16px; width: calc(50vw + 130px); }
  .level-two.is-dark.is-post-complete .nav-divider, .level-two.is-post-complete .nav-divider { width: calc(50vw + 90px); }
  .nav-divider .observe-results { margin-left: auto; }
}

/* Fade siblings when GraphPicker open on phone */
@media (max-width: 768px) {
  .navigation.picker-open-mobile .left { opacity: 0; pointer-events: none; transition: opacity 160ms ease; }
  .navigation.picker-open-mobile .level-one { opacity: 0; pointer-events: none; transition: opacity 160ms ease; }
  .navigation.picker-open-mobile .level-one .nav-toggle, .navigation.picker-open-mobile .level-one .feedback { opacity: 0 !important; pointer-events: none !important; transition: opacity 160ms ease; }
  .navigation.picker-open-mobile .level-two .nav-divider > :not(.graph-picker), .navigation.picker-open-mobile .level-two .burger-toggle { opacity: 0; pointer-events: none; transition: opacity 160ms ease; }
  .navigation .graph-picker { transition: opacity 160ms ease; opacity: 1; pointer-events: auto; }
}
