/* ===== Effects & Dot Animations ===== */
.fade-in {
  opacity: 1;
  transform: scale(1);
  transition: opacity 0.2s ease-in, transform 0.2s ease-in;
}

.fade-out {
  opacity: 0;
  transform: scale(0.95);
  transition: opacity 0.2s ease-out, transform 0.2s ease-out;
  pointer-events: none;
}

/* Animation class hooks */
.green-dot-animation   { animation-name: greenDotFluctuation; }
.yellow-dot-animation  { animation-name: yellowDotFluctuation; }
.red-dot-animation     { animation-name: redDotFluctuation; }

/* Green pulse — matches 0.7–1.0 range */
@keyframes greenDotFluctuation {
  0%, 100% {
    background: radial-gradient(circle, rgba(0, 200, 40, 0.9) 20%, rgba(110, 195, 70, 0.6) 80%);
  }
  50% {
    background: radial-gradient(circle, rgba(110, 195, 70, 0.95) 20%, rgba(0, 200, 40, 0.5) 80%);
  }
}

/* Yellow pulse — matches 0.4–0.7 range */
@keyframes yellowDotFluctuation {
  0%, 100% {
    background: radial-gradient(circle, rgba(255, 150, 40, 0.9) 20%, rgba(225, 175, 40, 0.6) 80%);
  }
  50% {
    background: radial-gradient(circle, rgba(255, 175, 60, 0.95) 20%, rgba(225, 190, 60, 0.5) 80%);
  }
}

/* Red pulse — matches 0.0–0.3 range */
@keyframes redDotFluctuation {
  0%, 100% {
    background: radial-gradient(circle, rgba(210, 0, 25, 0.9) 20%, rgba(235, 90, 0, 0.7) 80%);
  }
  50% {
    background: radial-gradient(circle, rgba(235, 90, 0, 0.95) 20%, rgba(210, 0, 25, 0.6) 80%);
  }
}

/* Optional flat background pulses (for bars, buttons, etc.) */
@keyframes greenFluctuationBackground {
  0%, 100% { background-color: rgb(0, 200, 40); }
  50%      { background-color: rgb(110, 195, 70); }
}

@keyframes yellowFluctuationBackground {
  0%, 100% { background-color: rgb(255, 150, 40); }
  50%      { background-color: rgb(225, 175, 40); }
}

@keyframes redFluctuationBackground {
  0%, 100% { background-color: rgb(200, 30, 30); } 
  50%      { background-color: rgb(230, 80, 0); } 
}

/* ===== Graph Wrapper ===== */
.graph-wrapper { backdrop-filter: blur(6px); opacity: 0; transition: opacity 0.4s ease-in-out, transform 0.4s ease-in-out; pointer-events: none; position: relative; transition-delay: 0.2s; z-index: 2; }
.graph-wrapper.visible { backdrop-filter: blur(0px); opacity: 1; pointer-events: all; display: block; z-index: 2; }

/* legacy named color animations (if still referenced) */
.dot-red { animation: redFluctuation 3s ease-in-out infinite; }
.dot-yellow { animation: yellowFluctuation 3s ease-in-out infinite; }
.dot-green { animation: greenFluctuation 3s ease-in-out infinite; }

/* Triangle “dot” marker */
.dot { filter: brightness(0.9); width: 0; height: 0; border-left: 20px solid transparent; border-right: 20px solid transparent; border-bottom: 35px solid rgba(0, 0, 0, 0.2); margin: 0 auto; display: inline-block; position: relative; box-shadow: 0 0 6px rgba(0, 0, 0, 0.3); }

/* ===== Info Overlay / Panel ===== */
.info-overlay, .info-panel { position: fixed; inset: 0; width: 100vw; height: 100dvh; overflow-y: auto; overflow-x: hidden; -webkit-overflow-scrolling: touch; touch-action: pan-y; overscroll-behavior: contain; z-index: 8; pointer-events: auto; background: transparent; }

/* Glassy overlay */
.info-overlay { position: fixed; inset: 0; z-index: 8; background: rgba(255,255,255,.22); backdrop-filter: blur(10px) saturate(120%); -webkit-backdrop-filter: blur(10px) saturate(120%); opacity: 0; pointer-events: none; transition: opacity 240ms ease; }
.info-overlay.is-visible { opacity: 1; pointer-events: auto; }

.info-overlay .radial-gradient { background: radial-gradient(circle at center bottom, rgba(238,239,240,.70) 0%, rgba(243,243,243,.35) 60%, rgba(255,255,255,0) 90%); mix-blend-mode: soft-light; opacity: .9; }
.info-overlay .radial-background { background: linear-gradient(180deg, rgba(169,208,228,.85) 0%, rgba(169,208,228,.60) 40%, rgba(169,208,228,.35) 100%); }

/* Panel entrance/exit */
.info-panel { transform: translateY(6px); opacity: 0; transition: transform 240ms ease, opacity 240ms ease; }
.info-overlay.is-visible .info-panel { transform: translateY(0); opacity: 1; }

/* Scrollbars: Firefox */
.info-panel { scrollbar-gutter: stable both-edges; scrollbar-width: thin; scrollbar-color: rgba(0,0,0,0.35) transparent; }

/* Scrollbars: WebKit */
.info-panel::-webkit-scrollbar { width: 10px; }
.info-panel::-webkit-scrollbar-track { background: transparent; border-radius: 10px; }
.info-panel::-webkit-scrollbar-thumb { border-radius: 10px; background: linear-gradient(180deg, #a4c3cd 0%, #4682b4 100%); border: 2px solid rgba(255,255,255,0.6); box-shadow: inset 0 0 0 1px rgba(0,0,0,0.06); }
.info-panel::-webkit-scrollbar-thumb:hover { background: linear-gradient(180deg, #8fb6c3 0%, #3a6e97 100%); }
.info-panel::-webkit-scrollbar-thumb:active { background: linear-gradient(180deg, #6ea1b1 0%, #2f5c7e 100%); }

/* ===== Mobile ===== */
@media screen and (max-width: 767px) {
  .draggable-info-graph { height: 100%; pointer-events: auto; user-select: text; cursor: grab; display: flex; flex-direction: column; align-items: center; margin-top: 0.4em; border-radius: 42px; background-color: rgba(255, 255, 255, 0.33); backdrop-filter: blur(6px); -webkit-backdrop-filter: blur(6px); border-image: linear-gradient(to right, #cae7f0, #4682b4); border-image-slice: 1; overflow: visible; box-shadow: inset 1px 1px 1px rgba(0,0,0,0.1), inset -1px -1px 1px rgba(255,255,255,0.2); }
  .draggable-container2 { height: auto; width: 325px; pointer-events: none; }

  .main-graph-divider { margin-left: 1.5px; margin-right: 1.5px; padding: 2px 20px 7px 4px; border-radius: 2px 2px 38px 38px; background-color: rgba(235, 250, 253, 0.5); border-image: linear-gradient(to left, #a4c3cd49, #c8d3d7a8); border-image-slice: 1; overflow: visible; box-shadow: inset 1px 1px 1px rgba(255,255,255,0.2), inset -1px -1px -1px rgba(0,0,0,0.1); border-top: solid 1px; }
  .divider { width: 100%; margin: 36px 0; text-align: left; align-items: center; display: flex; flex-direction: column; justify-content: flex-start; flex-wrap: nowrap; }
  .dot-text { width: 80%; }
  .title-divider { padding-left: 0.1em; padding-bottom: 0.0935em; }
  .text-divider { padding: 24px 6px 0 24px; }
  .info-body { padding-left: 8px; padding-top: 8em; }

  .main-graph-divider { padding-top: 16px; padding-bottom: 24px; margin-top: 48px; margin-bottom: 64px; margin-left: 24px; margin-right: 32px; background-color: rgba(255, 255, 255, 0.393); backdrop-filter: blur(8px) saturate(120%); -webkit-backdrop-filter: blur(8px) saturate(120%); border-radius: 36px; position: relative; overflow: visible; border: 1px solid rgba(255,255,255,.35); box-shadow: 0 12px 30px rgba(17,27,39,.12), 0 2px 8px rgba(17,27,39,.06), inset 0 1px 0 rgba(255,255,255,.65), inset 0 -1px 0 rgba(17,27,39,.06); }

  .text-divider { display: flex; flex-direction: column; }
  .title-divider { width: 100%; }
  h1.title-divider { padding-bottom: 0.66em; }
  .info-divider { width: 84%; text-align: left; }

  .dot { border-left: 27px solid transparent; border-right: 27px solid transparent; border-bottom: 48px solid rgba(0, 0, 0, 0.2); margin-left: 12%; margin-bottom: 24px; }
  .dot-red { border-bottom-color: rgba(249, 14, 33, 0.9); }
  .dot-yellow { border-bottom-color: rgba(245, 252, 95, 0.9); }
  .dot-green { border-bottom-color: rgba(1, 238, 0, 0.9); }
}

/* ===== Tablet ===== */
@media screen and (min-width: 768px) and (max-width: 1024px) {
  .draggable-info-graph { height: 100%; pointer-events: auto; user-select: text; cursor: grab; display: flex; flex-direction: column; align-items: center; margin-top: 0.4em; border-radius: 42px; background-color: rgba(255, 255, 255, 0.372); backdrop-filter: blur(6px); -webkit-backdrop-filter: blur(6px); border-image: linear-gradient(to right, #cae7f0, #4682b4); border-image-slice: 1; overflow: visible; box-shadow: inset 1px 1px 1px rgba(0,0,0,0.1), inset -1px -1px 1px rgba(255,255,255,0.2); }
  .draggable-container2 { height: auto; width: 368px; pointer-events: none; }

  .main-graph-divider { margin-left: 32px; margin-right: 64px; padding: 2px 20px 7px 4px; border-radius: 38px; background-color: rgba(235, 250, 253, 0.5); border-image: linear-gradient(to left, #a4c3cd49, #c8d3d7a8); border-image-slice: 1; overflow: visible; box-shadow: inset 1px 1px 1px rgba(255,255,255,0.2), inset -1px -1px -1px rgba(0,0,0,0.1); border-top: solid 1px; }
  .divider { width: 100%; margin: 36px 0; text-align: left; align-items: center; display: flex; flex-direction: row; justify-content: flex-start; flex-wrap: nowrap; }
  .dot-text { width: 80%; }
  .dot-text p { padding-right: 20%; }
  .title-divider { padding-left: 0.1em; padding-bottom: 0.0935em; }
  .text-divider { padding: 120px 6px 0 48px; }
  .info-body { padding-left: 8px; padding-top: 12em; }

  .main-graph-divider { padding-top: 16px; padding-bottom: 24px; margin-top: 48px; margin-bottom: 64px; background-color: rgba(255, 255, 255, 0.397); backdrop-filter: blur(8px) saturate(120%); -webkit-backdrop-filter: blur(8px) saturate(120%); border-radius: 36px; position: relative; overflow: visible; border: 1px solid rgba(255,255,255,.35); box-shadow: 0 12px 30px rgba(17,27,39,.12), 0 2px 8px rgba(17,27,39,.06), inset 0 1px 0 rgba(255,255,255,.65), inset 0 -1px 0 rgba(17,27,39,.06); }

  .text-divider { display: flex; flex-direction: column; }
  .title-divider { width: 100%; }
  h1.title-divider { padding-bottom: 0.45em; }
  .info-divider { width: 84%; text-align: left; }

  .dot { border-left: 27px solid transparent; border-right: 27px solid transparent; border-bottom: 51px solid rgba(0, 0, 0, 0.2); }
  .dot-red { border-bottom-color: rgba(249, 14, 33, 0.9); }
  .dot-yellow { border-bottom-color: rgba(245, 252, 95, 0.9); }
  .dot-green { border-bottom-color: rgba(1, 238, 0, 0.9); }
}

/* ===== Desktop ===== */
@media screen and (min-width: 1025px) {
  .draggable-info-graph { background-color: rgba(255, 255, 255, 0.493); height: 100%; pointer-events: auto; user-select: text; cursor: grab; display: flex; flex-direction: column; align-items: center; margin-top: 0.4em; border-radius: 42px; backdrop-filter: blur(6px); -webkit-backdrop-filter: blur(6px); border-image: linear-gradient(to right, #cae7f0, #4682b4); border-image-slice: 1; overflow: visible; box-shadow: inset 1px 1px 1px rgba(0,0,0,0.1), inset -1px -1px 1px rgba(255,255,255,0.2); }
  .draggable-container2 { height: auto; width: 375px; pointer-events: none; }
  .divider { width: 100%; padding: 32px 0; text-align: left; align-items: center; display: flex; flex-direction: row; justify-content: flex-start; flex-wrap: nowrap; }
  .dot-text { width: 80%; }
  .info-body { padding-left: 16vw; padding-right: 24vw; }

  .main-graph-divider { padding-top: 16px; padding-bottom: 24px; margin-top: 48px; margin-bottom: 64px; background-color: rgba(255, 255, 255, 0.349); backdrop-filter: blur(8px) saturate(120%); -webkit-backdrop-filter: blur(8px) saturate(120%); border-radius: 24px; position: relative; overflow: visible; border: 1px solid rgba(255,255,255,.35); box-shadow: inset 0 1px 0 rgba(255,255,255,.65), inset 0 -1px 0 rgba(17,27,39,.06); }

  .text-divider { display: flex; flex-direction: column; margin-top: 128px; }
  .title-divider { width: 100%; }
  h1.title-divider { padding-bottom: 0.33em; }
  .info-divider { width: 100%; text-align: left; }

  .dot { border-left: 30px solid transparent; border-right: 30px solid transparent; border-bottom: 52.5px solid rgba(0, 0, 0, 0.2); }
  .dot-red { border-bottom-color: rgba(249, 14, 33, 0.9); }
  .dot-yellow { border-bottom-color: rgba(245, 252, 95, 0.9); }
  .dot-green { border-bottom-color: rgba(1, 238, 0, 0.9); }
  .dot-text p { padding-right: 128px; }

}

/* ===== Fancy inner gloss for main-graph-divider ===== */
.main-graph-divider::before { content: ""; position: absolute; inset: 0; border-radius: inherit; pointer-events: none; background: linear-gradient(180deg, rgba(255,255,255,.38) 0%, rgba(255,255,255,.10) 24%, rgba(255,255,255,0) 60%); mix-blend-mode: screen; }

/* Fallback for mask unsupported */
@supports not ((-webkit-mask: none) or (mask-composite: exclude)) {
  .main-graph-divider::after { display: none; }
}
